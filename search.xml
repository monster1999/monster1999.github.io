<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo博客设置以及Next主题美化</title>
    <url>/archives/2e6caf39.html</url>
    <content><![CDATA[<!-- build time:Tue Jun 23 2020 16:36:28 GMT+0800 (GMT+08:00) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在博客美化之路上磕磕绊绊，此文章主要用来记录博客设置以及美化的设置方法，以便备用，或者供人参考。</p><p>提醒一下：<strong>博主next主题风格用的是Mist，若主题风格不一样，有些地方需酌情修改</strong>。</p><a id="more"></a><h1 id="基本样式配置"><a href="#基本样式配置" class="headerlink" title="基本样式配置"></a>基本样式配置</h1><h2 id="给页面添加背景图片"><a href="#给页面添加背景图片" class="headerlink" title="给页面添加背景图片"></a>给页面添加背景图片</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;   </span><br><span class="line">        <span class="attribute">background</span>:<span class="built_in">url</span>(图片链接);</span><br><span class="line">        <span class="attribute">background-size</span>:cover;</span><br><span class="line">        <span class="attribute">background-repeat</span>:no-repeat;</span><br><span class="line">        <span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">        <span class="attribute">background-position</span>:center;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><p>其中的css样式属性都可以根据你的自定义图片来更改，以达到最佳的效果。</p><h2 id="文字背景色以及半透明的设置"><a href="#文字背景色以及半透明的设置" class="headerlink" title="文字背景色以及半透明的设置"></a>文字背景色以及半透明的设置</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">            <span class="attribute">background</span>:<span class="built_in">rgba</span>(颜色rgb,透明度) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure><p>其中<code>border-radius</code>是给文章背景设置圆角，<code>margin-top</code>是设置文章到顶部的距离，其中属性可根据自己的需要进行调整。</p><p>在修改完文章背景色之后，文字颜色可能和背景色不能很好的搭配，这时候我们就需要修改文章字体的颜色了。打开<code>theme/next/source/css/_common/scaffolding</code>文件夹下的<code>base.styl</code>文件，找到<code>body{}</code>，将其中的<code>color:$text-color</code>更改为你想要的颜色即可。代码如下：</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative; <span class="comment">/* Required by scrollspy */</span></span><br><span class="line">  <span class="attribute">font-family</span>: <span class="variable">$font-family-base</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">$font-size-base</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="variable">$line-height-base</span>;</span><br><span class="line">  <span class="attribute">color</span>: 颜色代码;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">$body-bg-color</span>;</span><br><span class="line"></span><br><span class="line">  +mobile() &#123; <span class="attribute">padding-right</span>: <span class="number">0</span> <span class="meta">!important</span>; &#125;</span><br><span class="line">  +tablet() &#123; <span class="attribute">padding-right</span>: <span class="number">0</span> <span class="meta">!important</span>; &#125;</span><br><span class="line">  +desktop-large() &#123; <span class="attribute">font-size</span>: <span class="variable">$font-size-large</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="文章页面宽度设置"><a href="#文章页面宽度设置" class="headerlink" title="文章页面宽度设置"></a>文章页面宽度设置</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.main-inner</span> &#123;<span class="attribute">width</span>: 页面宽度;&#125;</span><br></pre></td></tr></table></figure><h2 id="页面头部和底部栏的背景色修改"><a href="#页面头部和底部栏的背景色修改" class="headerlink" title="页面头部和底部栏的背景色修改"></a>页面头部和底部栏的背景色修改</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">          <span class="attribute">background</span>:<span class="built_in">rgba</span>(颜色rgb,透明度) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">          <span class="attribute">background</span>:<span class="built_in">rgba</span>(颜色rgb,透明度) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>头部和底部也可以加入自定义的背景图。只需要在其中加入<code>background:url(图片的链接);</code>即可。</p><h2 id="网页顶部和底部的文字颜色修改"><a href="#网页顶部和底部的文字颜色修改" class="headerlink" title="网页顶部和底部的文字颜色修改"></a>网页顶部和底部的文字颜色修改</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码：</p><ul><li><p>头部文字颜色</p><ul><li><p>更改头部site-title的字体颜色<br>在<code>theme/next/source/css/_common/components/header</code>文件夹下打开<code>site-meta.styl</code>文件，找到<code>.brand{}</code>向里面添加以下代码：</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: 颜色代码 <span class="meta">!important</span>;</span><br></pre></td></tr></table></figure></li><li><p>更改头部menu的字体颜色<br>在相同的文件夹下打开<code>menu.styl</code>文件，找到<code>a{}</code>，向里面添加以下代码：</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: 颜色代码 <span class="meta">!important</span>;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>底部文字颜色</p><p>底部文字颜色的修改就显得很简单了，还是在<code>theme/next/source/css/_custom</code>文件夹下打开<code>custom.styl</code>文件，往里面添加以下代码：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.footer-inner</span> &#123;<span class="attribute">color</span>: 颜色代码;&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="侧栏背景图以及内部文字颜色的修改"><a href="#侧栏背景图以及内部文字颜色的修改" class="headerlink" title="侧栏背景图以及内部文字颜色的修改"></a>侧栏背景图以及内部文字颜色的修改</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码：</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>:url(图片链接);</span><br><span class="line">            <span class="attribute">background-size</span>: cover;</span><br><span class="line">            <span class="attribute">background-position</span>:center;</span><br><span class="line">            <span class="attribute">background-repeat</span>:no-repeat;</span><br><span class="line">            <span class="selector-tag">p</span>,<span class="selector-tag">span</span>,<span class="selector-tag">a</span> &#123;<span class="attribute">color</span>: 颜色代码;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中设置<code>p,span,a{color:颜色代码}</code>，即可修改侧边栏内部文字的颜色。</p><h2 id="样式合集"><a href="#样式合集" class="headerlink" title="样式合集"></a>样式合集</h2><p>在<code>source\_data</code>文件夹下打开<code>styles.styl</code>文件，往里面添加以下代码</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="comment">// 文章背景框</span></span><br><span class="line"><span class="comment">//给文章添加阴影</span></span><br><span class="line"><span class="selector-class">.post-block</span>&#123;</span><br><span class="line">   <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">0</span>;<span class="comment">//设置文章到顶部的距离</span></span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">0</span>;<span class="comment">//设置文章到底部的距离</span></span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   <span class="attribute">border-radius</span>: <span class="number">20px</span>;  <span class="comment">//给文章背景设置圆角</span></span><br><span class="line">   <span class="attribute">background</span>:rgba(颜色rgb,透明度) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, <span class="number">0.8</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, <span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章标题动态效果 next/source/css/_common/components/post/post-title.styl中.posts-expand .post-title-link确保`position: relative;`属性存在, 如果需要标题呈现链接效果颜色, 将`color`元素去除即可</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title-link</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: linear-gradient(<span class="number">90deg</span>, <span class="number">#a166ab</span> <span class="number">0%</span>, <span class="number">#ef4e7b</span> <span class="number">25%</span>, <span class="number">#f37055</span> <span class="number">50%</span>, <span class="number">#ef4e7b</span> <span class="number">75%</span>, <span class="number">#a166ab</span> <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章内标题样式（左边的竖线）</span></span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">4px</span> solid <span class="number">#657b83</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">5px</span> solid <span class="number">#657b83</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但并不是所有的样式都能调, 像页宽, 多说评论的样式在<code>styles.styl</code>文件是无效的.</p><h2 id="修改主页文章到顶部和底部的距离"><a href="#修改主页文章到顶部和底部的距离" class="headerlink" title="修改主页文章到顶部和底部的距离"></a>修改主页文章到顶部和底部的距离</h2><p>打开<code>themes\next\source\css\_schemes\Mist</code>文件夹中的<code>_layout.styl</code>文件 ，修改如下代码</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Page - Container</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="selector-class">.main-inner</span> &#123; <span class="comment">//设置文章到底部的距离</span></span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line"></span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123; <span class="comment">//设置文章到顶部的距离</span></span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改其中数字就能修改主页文章到顶部和底部的距离，找了很久才找到设置的方法-_-</p><h2 id="修改主页文章的间距"><a href="#修改主页文章的间距" class="headerlink" title="修改主页文章的间距"></a>修改主页文章的间距</h2><p>打开<code>themes\next\source\css\_schemes\Mist</code>文件夹中的<code>_posts-expand.styl</code>文件</p><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.post-block</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:first-child</span>) &#123;<span class="comment">//修改文章间距</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改其中数字就能修改主页文章的间距，找了很久才找到设置的方法-_-</p><h2 id="文本居中引用-Centered-Quote"><a href="#文本居中引用-Centered-Quote" class="headerlink" title="文本居中引用 - Centered Quote"></a>文本居中引用 - Centered Quote</h2><p>Tag Plugin 是一种使 Hexo 支持特殊样式内容的方法。例如，我们无法在标准 Markdown 中显示具有自定义尺寸的图像。然后我们可以使用标签插件来解决它。 Hexo 有很多可以帮助用户的标签。 Hexo 还具有主题接口，使主题能够创建自己的标签。</p><p>使用方法：</p><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">cq</span> %&#125;</span><span class="xml">世间所有的相遇，都是久别重逢</span><span class="template-tag">&#123;% <span class="name">endcq</span> %&#125;</span></span><br></pre></td></tr></table></figure><p>显示效果：</p><blockquote><p>世间所有的相遇，都是久别重逢</p></blockquote><h2 id="提示块-Note"><a href="#提示块-Note" class="headerlink" title="提示块 - Note"></a>提示块 - Note</h2><p>使用方法：</p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&#123;%<span class="built_in"> note default </span>%&#125;</span><br><span class="line">default 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%<span class="built_in"> note </span>primary %&#125;</span><br><span class="line">primary 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%<span class="built_in"> note </span>success %&#125;</span><br><span class="line">success 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%<span class="built_in"> note </span><span class="builtin-name">info</span> %&#125;</span><br><span class="line"><span class="builtin-name">info</span> 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%<span class="built_in"> note </span><span class="builtin-name">warning</span> %&#125;</span><br><span class="line"><span class="builtin-name">warning</span> 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%<span class="built_in"> note </span>danger %&#125;</span><br><span class="line">danger 提示块标签</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>主题配置文件中可以修改风格：</p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Note tag (bs-callout).</span></span><br><span class="line">note:</span><br><span class="line">  #<span class="built_in"> Note </span>tag style values:</span><br><span class="line">  #  -<span class="built_in"> simple </span>   bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla <span class="keyword">or</span> StackOverflow.</span><br><span class="line">  #  - disabled  <span class="builtin-name">disable</span> all CSS styles import of<span class="built_in"> note </span>tag.</span><br><span class="line">  # 风格</span><br><span class="line">  style: flat</span><br><span class="line">  # 要不要图标</span><br><span class="line">  icons: <span class="literal">true</span></span><br><span class="line">  # 圆角矩形</span><br><span class="line">  border_radius: 3</span><br><span class="line">  # Offset lighter of background <span class="keyword">in</span> % <span class="keyword">for</span> modern <span class="keyword">and</span> flat styles (modern: -12 | 12; flat: -18 | 6).</span><br><span class="line">  # Offset also applied <span class="keyword">to</span> label tag variables. This option can work with disabled<span class="built_in"> note </span>tag.</span><br><span class="line">  light_bg_offset: 0</span><br></pre></td></tr></table></figure><p>显示效果：</p><div class="note default"><p>default 提示块标签</p></div><div class="note primary"><p>primary 提示块标签</p></div><div class="note success"><p>success 提示块标签</p></div><div class="note info"><p>info 提示块标签</p></div><div class="note warning"><p>warning 提示块标签</p></div><div class="note danger"><p>danger 提示块标签</p></div><h2 id="标签-Label"><a href="#标签-Label" class="headerlink" title="标签 - Label"></a>标签 - Label</h2><p>使用方法：</p><figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">&#123;% label <span class="keyword">default</span>@默认 %&#125; &#123;% label primary@主要 %&#125; &#123;% label success@成功 %&#125; &#123;% label info@信息 %&#125; &#123;% label <span class="keyword">warning</span>@警告 %&#125; &#123;% label danger@危险 %&#125; </span><br><span class="line">&#123;% label success@这是成功的信息%&#125;</span><br></pre></td></tr></table></figure><p>显示效果：</p><span class="label default">默认</span> <span class="label primary">主要</span> <span class="label success">成功</span> <span class="label info">信息</span> <span class="label warning">警告</span> <span class="label danger">危险</span> <span class="label success">这是成功的信息</span><!-- rebuild by neat -->]]></content>
      <categories>
        <category>建站相关</category>
      </categories>
      <tags>
        <tag>hexo设置及美化</tag>
      </tags>
  </entry>
  <entry>
    <title>本博客当前使用的插件总结</title>
    <url>/archives/567debe0.html</url>
    <content><![CDATA[<!-- build time:Tue Jun 23 2020 16:36:28 GMT+0800 (GMT+08:00) --><h2 id="本博客当前使用的插件总结"><a href="#本博客当前使用的插件总结" class="headerlink" title="本博客当前使用的插件总结"></a>本博客当前使用的插件总结</h2><a id="more"></a><table><thead><tr><th align="left">插件</th><th>版本</th></tr></thead><tbody><tr><td align="left">hexo</td><td>4.2.0</td></tr><tr><td align="left">hexo-abbrlink</td><td>2.0.5</td></tr><tr><td align="left">hexo-deployer-git</td><td>2.1.0</td></tr><tr><td align="left">hexo-douban</td><td>1.1.3</td></tr><tr><td align="left">hexo-filter-nofollow</td><td>2.0.2</td></tr><tr><td align="left">hexo-generator-archive</td><td>1.0.0</td></tr><tr><td align="left">hexo-generator-category</td><td>1.0.0</td></tr><tr><td align="left">hexo-generator-index</td><td>1.0.0</td></tr><tr><td align="left">hexo-generator-searchdb</td><td>1.3.0</td></tr><tr><td align="left">hexo-generator-tag</td><td>1.0.0</td></tr><tr><td align="left">hexo-renderer-ejs</td><td>1.0.0</td></tr><tr><td align="left">hexo-renderer-marked</td><td>2.0.0</td></tr><tr><td align="left">hexo-renderer-stylus</td><td>1.1.0</td></tr><tr><td align="left">hexo-server</td><td>1.0.0</td></tr><tr><td align="left">hexo-symbols-count-time</td><td>0.7.1</td></tr><tr><td align="left">hexo-neat</td><td>1.0.4</td></tr></tbody></table><h2 id="Hexo-一键部署插件"><a href="#Hexo-一键部署插件" class="headerlink" title="Hexo 一键部署插件"></a>Hexo 一键部署插件</h2><h3 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h3><ul><li><a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener external nofollow noreferrer">hexo-deployer-git</a></li></ul><h3 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>然后修改站点配置文件<code>_config.yml</code> 中的配置：</p><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">- <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:dta0502/dta0502.github.io.git</span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure><h2 id="Hexo-文章永久链接插件"><a href="#Hexo-文章永久链接插件" class="headerlink" title="Hexo 文章永久链接插件"></a>Hexo 文章永久链接插件</h2><h3 id="地址-1"><a href="#地址-1" class="headerlink" title="地址"></a>地址</h3><ul><li><a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener external nofollow noreferrer">hexo-abbrlink</a></li></ul><h3 id="安装配置-1"><a href="#安装配置-1" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-abbrlink <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>然后我们可以在站点配置文件<code>_config.yml</code> 中修改为：</p><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">url:</span> https:<span class="comment">//tding.top/</span></span><br><span class="line"><span class="symbol">root:</span> /</span><br><span class="line"><span class="symbol">permalink:</span> archives/:abbrlink.html</span><br><span class="line"><span class="symbol">abbrlink:</span></span><br><span class="line"><span class="symbol">  alg:</span> crc32  <span class="meta"># 算法：crc16(default) and crc32</span></span><br><span class="line"><span class="symbol">  rep:</span> hex    <span class="meta"># 进制：dec(default) and hex</span></span><br><span class="line"><span class="symbol">permalink_defaults:</span></span><br></pre></td></tr></table></figure><h2 id="Hexo-豆瓣读书、豆瓣电影插件"><a href="#Hexo-豆瓣读书、豆瓣电影插件" class="headerlink" title="Hexo 豆瓣读书、豆瓣电影插件"></a>Hexo 豆瓣读书、豆瓣电影插件</h2><h3 id="安装配置-2"><a href="#安装配置-2" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-douban <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>将下面的配置写入站点的配置文件<code>_config.yml</code> 里</p><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">douban:</span><br><span class="line">  user: mythsman</span><br><span class="line">  builtin: <span class="literal">false</span></span><br><span class="line">  book:</span><br><span class="line">    title: 'This <span class="keyword">is</span> <span class="keyword">my</span> book title'</span><br><span class="line">    <span class="literal">quote</span>: 'This <span class="keyword">is</span> <span class="keyword">my</span> book <span class="literal">quote</span>'</span><br><span class="line">  movie:</span><br><span class="line">    title: 'This <span class="keyword">is</span> <span class="keyword">my</span> movie title'</span><br><span class="line">    <span class="literal">quote</span>: 'This <span class="keyword">is</span> <span class="keyword">my</span> movie <span class="literal">quote</span>'</span><br><span class="line">  game:</span><br><span class="line">    title: 'This <span class="keyword">is</span> <span class="keyword">my</span> game title'</span><br><span class="line">    <span class="literal">quote</span>: 'This <span class="keyword">is</span> <span class="keyword">my</span> game <span class="literal">quote</span>'</span><br><span class="line">  <span class="keyword">timeout</span>: <span class="number">10000</span></span><br></pre></td></tr></table></figure><ul><li>user: 你的豆瓣 ID. 打开豆瓣，登入账户，然后在右上角点击 “个人主页” ，这时候地址栏的 URL 大概是这样：”<code>https://www.douban.com/people/xxxxxx/</code>“，其中的”xxxxxx” 就是你的个人 ID 了。</li><li>builtin: 是否将生成页面的功能嵌入 <code>hexo s</code> 和 <code>hexo g</code> 中，默认是 false, 另一可选项为 true (1.x.x 版本新增配置项)。</li><li>title: 该页面的标题。</li><li>quote: 写在页面开头的一段话，支持 html 语法。</li><li>timeout: 爬取数据的超时时间，默认是 10000ms , 如果在使用时发现报了超时的错 (ETIMEOUT) 可以把这个数据设置的大一点。</li></ul><p>如果只想显示某一个页面 (比如 movie)，那就把其他的配置项注释掉即可。</p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>我们只需要在 Git Bash 中输入以下命令：<code>hexo clean &amp;&amp; hexo douban -bgm &amp;&amp; hexo g &amp;&amp; hexo s</code> 即可，注意其中开启 hexo-douban 的命令中，-bgm 代表的是 book、game、movie 三个参数，如果只需要其中的一部分就只带你想要的那些参数。</p><p><strong>注意：由于 hexo douban 的简写也是 hexo d，与 hexo deploy 的简写指令 hexo d 冲突，因此在进行二者部署的时候，只能都打全名而不能打简写形式</strong>。</p><blockquote><ul><li>在 0.x.x 版本中，文章的更新和豆瓣页面的爬取操作是绑定在一起的，无法支持单独更新文章或者单独爬取文章。</li><li>在 1.x.x 版本中，使用 hexo douban 命令即可生成指定页面，如果不加参数，那么默认参数为 - bgm。如果配置了 builtin 参数为 true，那么除了可以使用 hexo douban 命令之外，hexo g 或 hexo s 也内嵌了生成页面的功能。因此，还是按照 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code> 就可以。</li></ul></blockquote><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>上面都没问题之后，我们只需要在站点目录下测试 <code>http://localhost:4000/books</code> 或者 <code>http://localhost:4000/movies</code> 等，如果看到页面了就说明成功了。</p><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>如果上述都没有问题，我们就可以在菜单栏中添加按钮了，打开主题配置文件<code>_config.yml</code>，找到菜单按钮，添加下面内容：</p><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  movies:</span> <span class="meta-keyword">/movies/</span> || film</span><br><span class="line"><span class="symbol">  books:</span> <span class="meta-keyword">/books/</span> || book</span><br></pre></td></tr></table></figure><p>然后在 <code>next/language/zh-CN.yml</code> 文件中添加对应的中文参数信息：</p><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  movies:</span> 观影</span><br><span class="line"><span class="symbol">  books:</span> 阅读</span><br></pre></td></tr></table></figure><p>至此，我们就完成了豆瓣读书页面的添加。</p><h2 id="Hexo-字数和阅读时间统计插件"><a href="#Hexo-字数和阅读时间统计插件" class="headerlink" title="Hexo 字数和阅读时间统计插件"></a>Hexo 字数和阅读时间统计插件</h2><h3 id="地址-2"><a href="#地址-2" class="headerlink" title="地址"></a>地址</h3><ul><li><a href="https://github.com/theme-next/hexo-symbols-count-time" target="_blank" rel="noopener external nofollow noreferrer">hexo-symbols-count-time</a></li></ul><h3 id="安装配置-3"><a href="#安装配置-3" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-symbols-<span class="keyword">count</span>-<span class="built_in">time</span> <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>在站点配置文件<code>_config.yml</code> 中添加以下代码：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">symbols:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">time:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>然后由于此插件集成在 NexT 中，然后修改主题配置文件<code>_config.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">awl:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">wpm:</span> <span class="number">275</span></span><br></pre></td></tr></table></figure><h2 id="Hexo-本地搜索功能"><a href="#Hexo-本地搜索功能" class="headerlink" title="Hexo 本地搜索功能"></a>Hexo 本地搜索功能</h2><h3 id="本地搜索的原理"><a href="#本地搜索的原理" class="headerlink" title="本地搜索的原理"></a>本地搜索的原理</h3><p>对于动态网站来说，可以通过 php 实现。但是，Hexo 博客是静态网站，用不了 php。</p><p>NexT 主题已经实现这个功能，它用了 Hexo 的拓展包 <code>hexo-generator-searchdb</code>，预先生成了一个文本库 <code>search.xml</code>，然后传到了网站里面。在本地搜索的时候，NexT 直接用 javascript 调用了这个文件，从而实现了静态网站的本地搜索。</p><h3 id="插件地址"><a href="#插件地址" class="headerlink" title="插件地址"></a>插件地址</h3><ul><li><a href="https://github.com/theme-next/hexo-generator-searchdb" target="_blank" rel="noopener external nofollow noreferrer">hexo-generator-searchdb</a></li></ul><h3 id="安装配置-4"><a href="#安装配置-4" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-searchdb <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>然后我们修改站点配置<code>_config.yml</code> 文件，添加如下内容：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 本地搜索</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">100</span></span><br></pre></td></tr></table></figure><ul><li>path：索引文件的路径，相对于站点根目录</li><li>field：搜索范围，默认是 post，还可以选择 page、all，设置成 all 表示搜索所有页面</li><li>limit：限制搜索的条目数</li></ul><p>然后修改主题配置文件<code>_config.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="Hexo-文章置顶插件"><a href="#Hexo-文章置顶插件" class="headerlink" title="Hexo 文章置顶插件"></a>Hexo 文章置顶插件</h2><h3 id="地址-3"><a href="#地址-3" class="headerlink" title="地址"></a>地址</h3><ul><li><a href="https://github.com/netcan/hexo-generator-index-pin-top" target="_blank" rel="noopener external nofollow noreferrer">hexo-generator-index-pin-top</a></li></ul><h3 id="安装配置-5"><a href="#安装配置-5" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">uninstall</span> hexo-generator-<span class="keyword">index</span> <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-<span class="keyword">index</span>-pin-top <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>在需要置顶的文章的 <code>Front-matter</code> 中加上 <code>top: true</code> 或者 <code>top: 任意数字</code>，比如：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">TMDb电影数据分析</span></span><br><span class="line"><span class="attr">declare:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Python</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">数据分析</span></span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">数据分析</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">实战</span></span><br><span class="line"><span class="attr">abbrlink:</span> <span class="string">7e380af2</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="number">-11</span><span class="number">-23</span> <span class="number">13</span><span class="string">:20:03</span></span><br><span class="line"><span class="attr">top:</span> <span class="number">100</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>注意：top 中数字越大，文章越靠前</strong>。</p><h3 id="设置置顶图标"><a href="#设置置顶图标" class="headerlink" title="设置置顶图标"></a>设置置顶图标</h3><p>打开 <code>/themes/next/layout/_macro/</code> 目录下的 <code>post.swig</code> 文件，在 <code>&lt;div class=&quot;post-meta&quot;&gt;</code> 的第一个 <code>&lt;span&gt;</code> 标签下，插入如下代码：</p><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> post.top %&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-thumb-tack"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">7D26CD</span>&gt;</span>置顶<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-meta-divider"</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Hexo-减少出站链接"><a href="#Hexo-减少出站链接" class="headerlink" title="Hexo 减少出站链接"></a>Hexo 减少出站链接</h2><p>减少出站链接能够有效防止权重分散，Hexo 有很方便的自动为出站链接添加 <code>nofollow</code> 的插件。</p><h3 id="地址-4"><a href="#地址-4" class="headerlink" title="地址"></a>地址</h3><ul><li><a href="https://blog.skk.moe/post/hexo-filter-nofollow-joined-hexo-official-plugin/" target="_blank" rel="noopener external nofollow noreferrer">hexo-filter-nofollow</a></li></ul><h3 id="安装配置-6"><a href="#安装配置-6" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">npm install hexo-<span class="built_in">filter</span>-nofollow <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>再在站点的<code>_config.yml</code> 中添加配置，将 <code>nofollow</code> 设置为 <code>true</code>：</p><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="attribute">nofollow</span>:</span><br><span class="line">  <span class="attribute">enable</span>: true</span><br><span class="line">  <span class="attribute">field</span>: site</span><br><span class="line">  <span class="attribute">exclude</span>:</span><br><span class="line">    - <span class="string">'exclude1.com'</span></span><br><span class="line">    - <span class="string">'exclude2.com'</span></span><br></pre></td></tr></table></figure><p>这样，例外的链接将不会被加上 <code>nofollow</code> 属性。</p><h2 id="Hexo-页面静态资源压缩插件"><a href="#Hexo-页面静态资源压缩插件" class="headerlink" title="Hexo 页面静态资源压缩插件"></a>Hexo 页面静态资源压缩插件</h2><p>我们自己添加的 css 和 js 文件为了可读性，往往会有很多换行和空格，这些对于浏览器来说是没有用的，甚至还会降低渲染页面的速度。同时，由于 Markdown 转成 html 的 bug，会导致页面存在大量的空白，我们可以通过查看页面源代码发现这些大量的空白符，这也会造成页面渲染的性能问题。</p><p>因此，我们需要对页面的静态资源进行压缩，包括 css、js 和 html 等文件。</p><p>我们可以使用 <code>hexo-neat</code> 插件进行压缩。<code>hexo-neat</code> 配置简单，无需额外命令，我们只需使用原本的调试、部署命令就可以自动完成静态资源的压缩。</p><h3 id="地址-5"><a href="#地址-5" class="headerlink" title="地址"></a>地址</h3><ul><li><a href="https://github.com/rozbo/hexo-neat" target="_blank" rel="noopener external nofollow noreferrer">hexo-neat</a></li></ul><h3 id="安装配置-7"><a href="#安装配置-7" class="headerlink" title="安装配置"></a>安装配置</h3><h4 id="安装-hexo-neat-插件"><a href="#安装-hexo-neat-插件" class="headerlink" title="安装 hexo-neat 插件"></a>安装 hexo-neat 插件</h4><p>安装插件：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-neat <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h4 id="站点配置文件添加相关配置"><a href="#站点配置文件添加相关配置" class="headerlink" title="站点配置文件添加相关配置"></a>站点配置文件添加相关配置</h4><p>然后我们需要在<strong>站点</strong>配置文件<code>_config.yml</code> 中添加以下代码：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 博文压缩</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 压缩html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"><span class="comment"># 压缩css  </span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'**/*.min.css'</span></span><br><span class="line"><span class="comment"># 压缩js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'**/*.min.js'</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'**/jquery.fancybox.pack.js'</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'**/index.js'</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'**/fireworks.js'</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>建站相关</category>
      </categories>
      <tags>
        <tag>hexo插件</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx配置ssl证书实现https</title>
    <url>/archives/d3850c25.html</url>
    <content><![CDATA[<!-- build time:Tue Jun 23 2020 16:36:28 GMT+0800 (GMT+08:00) --><h4 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h4><p>服务器系统：Ubuntu16.04（其他系统或有不同，请自行搜索）</p><p>nginx版本：1.10.3</p><p>主机商：阿里云</p><h4 id="ssl证书申请："><a href="#ssl证书申请：" class="headerlink" title="ssl证书申请："></a>ssl证书申请：</h4><p>在阿里云域名管理控制台–基本信息–ssl证书–开启ssl证书处购买免费ssl证书。在云盾证书服务(包年)处选择免费版（个人）DV免费：</p><a id="more"></a> <img src="/archives/d3850c25/1.png"><p>购买一年ssl证书（证书过期后再次购买即可，配置过程是一样的）。购买成功后回到管理页面，点击“补全”，输入你的域名，点下一步，待几分钟，证书状态变为“已签发”后，证书就申请成功了。</p><p>说明：因为我们这里申请的是开发版免费证书，所以一个证书仅支持一个域名认证，不支持通配符。</p><h3 id="下载证书"><a href="#下载证书" class="headerlink" title="下载证书"></a>下载证书</h3><p>列表中找到已签发的证书，进入下载页面，找到nginx信息，并点击下载：</p><img src="/archives/d3850c25/2.png"><p>下载的文件有两个：</p><p><em>domain name.pem</em>和<em>domain name.key</em>（domain name为你证书名称）</p><h3 id="服务器安装并配置nginx"><a href="#服务器安装并配置nginx" class="headerlink" title="服务器安装并配置nginx"></a>服务器安装并配置nginx</h3><p>登录到服务器：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">$ apt-<span class="built_in">get</span> update <span class="comment">// 更新软件</span></span><br><span class="line">$ apt-<span class="built_in">get</span> install nginx <span class="comment">// 安装nginx</span></span><br></pre></td></tr></table></figure><p>若输入 <code>nginx -V</code> 可以看到 nginx 版本信息，则安装成功。</p><h3 id="配置ssl证书"><a href="#配置ssl证书" class="headerlink" title="配置ssl证书"></a>配置ssl证书</h3><p>1，nginx的安装目录为：/etc/nginx/。进入目录，增加cert/文件夹，把刚刚下载的两个文件上传到cert/文件夹中。</p><p>2，在/etc/nginx/sites-enabled/下，增加monsterd.cn(此为你的域名)文件。内容如下：</p><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">server</span> &#123;</span><br><span class="line">    <span class="keyword">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    server_name monsterd.cn; //你的域名</span><br><span class="line">    root /var/www/blog; // 网站根目录</span><br><span class="line">    <span class="keyword">index</span> <span class="keyword">index</span>.html <span class="keyword">index</span>.htm;</span><br><span class="line">    ssl_certificate  cert/<span class="keyword">domain</span> <span class="type">name</span>.pem;// 将<span class="keyword">domain</span> <span class="type">name</span>改成你证书的名字</span><br><span class="line">    ssl_certificate_key cert/<span class="keyword">domain</span> <span class="type">name</span>.key;// 将<span class="keyword">domain</span> <span class="type">name</span>改成你证书的名字</span><br><span class="line">    ssl_session_timeout <span class="number">5</span>m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!<span class="keyword">NULL</span>:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line">    ssl_prefer_server_ciphers <span class="keyword">on</span>;</span><br><span class="line">    <span class="keyword">location</span> / &#123;</span><br><span class="line">        <span class="keyword">index</span> <span class="keyword">index</span>.html <span class="keyword">index</span>.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">server</span> &#123;</span><br><span class="line">    <span class="keyword">listen</span> <span class="number">80</span>;</span><br><span class="line">    server_name monsterd.cn;  // 你的域名</span><br><span class="line">    rewrite ^(.*)$ https://$host$<span class="tcl"><span class="number">1</span> permanent; // 把<span class="keyword">http</span>的域名请求转成https</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置完成后，检查一下nginx配置文件是否可用，有successful表示可用。</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">$ nginx -t <span class="comment">// 检查nginx配置文件</span></span><br></pre></td></tr></table></figure><p>配置正确后，重新加载配置文件使配置生效：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">$ nginx -s reload <span class="comment">// 使配置生效</span></span><br></pre></td></tr></table></figure><p>至此，nginx的https访问就完成了，并且通过rewrite方式把所有http请求也转成了https请求，更加安全。</p><p>如需重启nginx，用以下命令：</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">$ service nginx <span class="built_in">stop</span> <span class="comment">// 停止</span></span><br><span class="line">$ service nginx start <span class="comment">// 启动</span></span><br><span class="line">$ service nginx restart <span class="comment">// 重启</span></span><br></pre></td></tr></table></figure><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>输入<a href="http://monsterd.cn">http://monsterd.cn</a> 也会自动跳转至https页面。</p><p>说明：云服务器比如阿里云ECS，需要到阿里云ECS的管理后台的安全组，修改端口过滤规则把80端口和443端口开放才能访问到。</p><p>至此，就能实现https。</p><hr><!-- rebuild by neat -->]]></content>
      <categories>
        <category>建站相关</category>
      </categories>
      <tags>
        <tag>https</tag>
      </tags>
  </entry>
</search>
